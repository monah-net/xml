<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="dashboardsConfig.xsd"
      id="xmlMigrationMainTab">
    <include name="header_section"/>
    <include name="footer_section"/>
    <h_section>
        <button id="init_button" icon_alignment="RIGHT" width="180px" style="primary-button"
                text="Initialize new Instance">
            <open_popup_window height="70%" width="70%" closePath="close_pop_up" popup_title="Initialize new Instance">
                <v_section width="100%">
                    <h_section align="TOP_LEFT">
                        <v_section width="100%">
                            <h_section>
                                <v_section width="25%">
                                    <spacer height="65px"/>
                                    <label icon_alignment="LEFT" style="heading-2">
                                        <string_value value="Input instance keys : "/>
                                        <style type="CAPTION"/>
                                        <composite_visibility_condition/>
                                    </label>
                                </v_section>
                                <v_section width="50%">
                                    <text_field id="filing_ID_var" caption="Filing Type" input_type="string"
                                                default_value=""
                                                style="sidebar" width="100%" label_position="TOP">
                                        <composite_enable_condition/>
                                    </text_field>
                                    <text_field id="snd_country_var" caption="Sender country" default_value=""
                                                input_type="string" label_position="TOP" style="sidebar" width="100%">
                                        <composite_enable_condition/>
                                    </text_field>
                                    <text_field id="rec_country_var" caption="Receiver country" input_type="string"
                                                label_position="TOP" style="sidebar" width="100%">
                                        <composite_enable_condition/>
                                    </text_field>
                                </v_section>
                            </h_section>
                        </v_section>
                    </h_section>
                    <h_section>
                        <label style="CAPTION" icon_alignment="LEFT">
                            <string_value value="Variable values : "/>
                            <style type="CAPTION"/>
                            <composite_visibility_condition/>
                        </label>
                    </h_section>
                    <h_section>
                        <v_section>
                            <label>
                                <string_value value="Account Info Type"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="FATCA (F)/CRS (C)"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="File name for ID Restoring Request"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="Empty Excel Template File Path with File Name"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="Generate Template For Refiling (YES/NO)"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="Path for Generated Template with Data for Refiling"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="Submission File Name"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="FATCA Payload Directory"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="File name path"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value value="Metadata File Name"/>
                                <composite_visibility_condition/>
                            </label>
                            <label>
                                <string_value
                                        value="Matching status of a generated file to an incoming file (TRUE or FALSE)"/>
                                <composite_visibility_condition/>
                            </label>
                        </v_section>
                        <v_section>
                            <text_field id="acct_info_type_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="FATCA_CRS">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="ris_file_name_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="FatcaMainDirectory_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="emptyTemplatePath_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="gener_template_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="outputTemplateDir_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="SUBMISSION_FILE_NAME_var">
                                <composite_enable_condition/>
                            </text_field>
                            <text_field id="FATCAPayLoadDirectory_var">
                                <composite_enable_condition/>
                            </text_field>
                        </v_section>
                    </h_section>
                    <h_section>
                        <button text="Submit" style="primary-button" width="200px">
                            <action_chain>
                                <run_workflow>
                                    <workflow>
                                        <project>
                                            <string_value value="${project}"/>
                                        </project>
                                        <branch>
                                            <string_value value="${branch}"/>
                                        </branch>
                                        <name>
                                            <string_value value="SendNotificationButton"/>
                                        </name>
                                    </workflow>
                                    <instance>
                                        <instance_selector_ref reference="cic_instance_selector"/>
                                    </instance>
                                    <variables>
                                        <variable name="customers">
                                            <multiselection_value reference="Customer_Details" as_string="true"/>
                                        </variable>
                                        <variable name="rm_name">
                                            <model_value reference="rmlist_notification" global="true" mode="value"/>
                                        </variable>
                                        <variable name="notif_comment">
                                            <model_value reference="comment_notif" mode="value" global="false"/>
                                        </variable>
                                        <variable name="notif_type">
                                            <model_value reference="notification_type_list" mode="value"
                                                         global="false"/>
                                        </variable>
                                        <variable name="notif_template">
                                            <model_value reference="customer_notification_template" global="false"
                                                         mode="value"/>
                                        </variable>
                                    </variables>
                                    <positive_result_action>
                                        <refresh_component component_id="Customer_Details"/>
                                    </positive_result_action>
                                    <negative_result_action>
                                        <open_popup_window height="50px" width="100px">
                                            <label>
                                                <string_value
                                                        value="Sending notifications were failed, please see log of SendNotificationButton workflow"/>
                                                <composite_visibility_condition/>
                                            </label>
                                        </open_popup_window>
                                    </negative_result_action>
                                </run_workflow>
                                <data_source_update>
                                    <source_address project="${project}" branch="${branch}" name="cic_history_source"/>
                                    <fields>
                                        <field name="action_name">
                                            <string_value value="Sending notification"/>
                                        </field>
                                        <field name="comment_val">
                                            <model_value reference="comment_notif"/>
                                        </field>
                                        <field name="user_name">
                                            <function_value function="=userName()"/>
                                        </field>
                                        <field name="user_ID">
                                            <function_value function="=userId()"/>
                                        </field>
                                    </fields>
                                    <keys>
                                        <field name="customer_ID">
                                            <model_value reference="Customer_Details"/>
                                        </field>
                                        <field name="timeStampValue">
                                            <function_value function="=currentDateInMillis()"/>
                                        </field>
                                    </keys>
                                </data_source_update>
                                <set_model_property property_path="close_popup" global="true">
                                    <value>
                                        <function_value function="=uuid()"/>
                                    </value>
                                </set_model_property>
                                <refresh_component component_id="Customer_Details"/>
                            </action_chain>
                            <composite_enable_condition/>
                            <composite_visibility_condition/>
                        </button>
                        <button text="Cancel" style="secondary-button" width="200px">
                            <set_model_property property_path="close_pop_up" global="false">
                                <value>
                                    <function_value function="=uuid()"/>
                                </value>
                            </set_model_property>
                            <composite_enable_condition/>
                            <composite_visibility_condition/>
                        </button>
                    </h_section>
                </v_section>
            </open_popup_window>
            <composite_enable_condition/>
            <composite_visibility_condition/>
        </button>
    </h_section>
</page>