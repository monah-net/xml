<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="dashboardsConfig.xsd"
      id="signoff_report_snippet">
    <v_section id="section_grid_sub_all" width="100%">
        <h_section id="section_instance_picker_cic_summary" height="50px" width="100%" align="TOP_LEFT">
            <separate_instance_selector id="cic_instance_selector"
                                        width="60%" use_description_for_name="true" >
                <data_source project="${project}" branch="${branch}" source="dbd_cic_1_1_summary"
                             type="DataSource"/>
            </separate_instance_selector>
        </h_section>
    </v_section>
    <h_section width = "100%">
        <v_section width = "60%">
            <h_section id="dbd_cic_1_1_summary_title_section" height="50px" width="100%">
                <static_label id="cic_summary_label" text="CIC Summary" style="cvh1"/>
            </h_section>
            <h_section id="dbd_cic_1_1_summary_grid_section" height="200px" width="95%" align="TOP_LEFT">
                <grid id="CIC Summary" listened_data="true">
                    <data_source project="${project}" branch="${branch}" source="dbd_cic_1_1_summary"
                                 type="DataSource" />
                    <instance>
                        <instance_selector_ref reference="cic_instance_selector"/>
                    </instance>
                    <selection type="SINGLE" unselectable="true">
                        <unique_id field="indicia_type"/>
                    </selection>
                    <column id="c0" title="Applicability">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="applicability"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c1" title="Indicia Type">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="indicia_type"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c2" title="Total">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="total"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c3" title="Pending Verification HVA">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="pending_verification_hva"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c4" title="Pending Verification LVA">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="pending_verification_lva"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c5" title="Notified">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="notified"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c6" title="Changes Approved">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="changes_approved"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                </grid>
            </h_section>
        </v_section>
        <v_section width = "40%">
            <h_section id="dbd_cic_1_2_aging_title_section" height="50px" width="100%">
                <static_label id="cic_aging_label" text="CIC Aging" style="cvh1"/>
            </h_section>
            <h_section id="dbd_cic_1_1_aging_grid_section" height="200px" width="95%" align="TOP_LEFT">
                <grid id="CIC Aging">
                    <data_source project="${project}" branch="${branch}" source="dbd_cic_1_2_aging"
                                 type="DataSource" />
                    <instance>
                        <instance_selector_ref reference="cic_instance_selector"/>
                    </instance>
                    <selection type="SINGLE" unselectable="true">
                        <unique_id field="aging_category"/>
                    </selection>
                    <column id="c0" title="Aging Category">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="aging_category"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                    <column id="c1" title="Count">
                        <component>
                            <grid_label_component>
                                <dynamic_caption>
                                    <field_value field="count"/>
                                </dynamic_caption>
                            </grid_label_component>
                        </component>
                    </column>
                </grid>
            </h_section>
        </v_section>
    </h_section>
    <h_section id="dbd_cic_1_3_rm_summary_title_section" height="50px" width="100%">
        <static_label id="cic_rm_summary_label" text="RM Summary" style="cvh1"/>
    </h_section>
    <h_section id="dbd_cic_1_3_rm_summary_grid_section" height="200px" width="98%" align="TOP_LEFT">
        <grid id="RM Summary">
            <data_source project="${project}" branch="${branch}" source="dbd_cic_1_3_rm_summary"
                         type="DataSource" />
            <instance>
                <instance_selector_ref reference="cic_instance_selector"/>
            </instance>
            <selection type="SINGLE" unselectable="true">
                <unique_id field="rm_name"/>

            </selection>
            <column id="c0" title="RM Name">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="rm_name"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c1" title="Tagged Customers">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="tagged_customers"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c2" title="Customes having CIC">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="cic_customers"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c3" title="Number of Notifications sent">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="notifications_number"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
        </grid>
    </h_section>
    <h_section id="dbd_cic_1_4_customer_details_title_section" height="50px" width="100%">
        <static_label id="dbd_cic_1_4_customer_details_label" text="Customer Details" style="cvh1"/>
    </h_section>
    <h_section id="dbd_cic_1_4_customer_details_section" height="200px" width="98%" align="TOP_LEFT">
        <grid id="Customer_Details">
            <data_source project="${project}" branch="${branch}" source="dbd_cic_1_4_customer_details"
                         type="DataSource" />
            <instance>
                <instance_selector_ref reference="cic_instance_selector"/>
            </instance>
            <filter empty_value_policy="ALL">
                <filter_value>
                    <model_value reference="RM Summary"/>
                </filter_value>
                <filter_mapping operator="EQUALS">
                    <filter_on name="rm_name"/>
                </filter_mapping>
            </filter>
            <selection type="MULTIPLE" unselectable="true">
                <unique_id field="customer_number"/>
            </selection>
            <column id="c0" title="Customer Number">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="customer_number"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c1" title="Status">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="status"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c2" title="Cust Type">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="cust_type"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c3" title="First Name">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="first_name"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c4" title="Middle Name">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="middle_name"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c5" title="Last Name">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="last_name"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c6" title="Business Name">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="business_name"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c7" title="Address Free">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="address_free"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c8" title="Address Line 1">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="address_line_1"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c9" title="Address Line 2">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="address_line_2"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c10" title="Address Line 3">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="address_line_3"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c11" title="Customer Number">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="customer_number"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c12" title="Post Code">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="post_code"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c13" title="Country">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="country"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c14" title="Phone Country Code">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="phone_country_code"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c15" title="Phone Number">
                <component>
                    <grid_label_component>
                        <dynamic_caption>
                            <field_value field="phone_number"/>
                        </dynamic_caption>
                    </grid_label_component>
                </component>
            </column>
            <column id="c16" title="View Details Button">
                <component>
                    <grid_button_component>
                        <static_caption text="View Details"/>
                        <action_chain>
                            <set_url_condition_to_model>
                                <condition from_ref="Customer_Details" to_ref="DD_TEST"/>
                            </set_url_condition_to_model>
                            <open_page open_in_new_tab="true">
                                <app_page_ref app_name="fcrs_cic" page_id="fcrs_cic_customer_info_snippet" add_condition="true"/>
                            </open_page>
                        </action_chain>
                        <composite_enable_condition/>
                    </grid_button_component>
                </component>
            </column>
        </grid>
    </h_section>
    <h_section width="100%" align="MIDDLE_RIGHT" style="card">
        <button text="Change Status" style="primary-button">
            <open_popup_window popup_title="Change Status" height="50%" width="50%" closePath="close_popup">
                <v_section>
                    <h_section>
                        <label width="160px" style="fixed-width">
                            <string_value value="Selected Customer Numbers"/>
                            <composite_visibility_condition/>
                        </label>
                        <v_section height="100px" width="200px">
                            <grid id="CustomerDetTEMP" hide_header="true" height="100%" width="100%">
                                <data_source project="FATCA_CIC" branch="2019_v03" source="dbd_cic_1_4_customer_details"
                                             type="DataSource"/>
                                <instance>
                                    <instance_selector_ref reference="cic_instance_selector"/>
                                </instance>
                                <filter>
                                    <filter_value>
                                        <model_value reference="Customer_Details"/>
                                    </filter_value>
                                    <filter_mapping>
                                        <filter_on name="customer_number"/>
                                    </filter_mapping>
                                </filter>
                                <column id="c1" title="">
                                    <component>
                                        <grid_label_component alignment="CENTER">
                                            <dynamic_caption>
                                                <field_value field="customer_number"/>
                                            </dynamic_caption>
                                        </grid_label_component>
                                    </component>
                                </column>
                            </grid>
                        </v_section>
                    </h_section>
                    <h_section>
                        <label width="160px">
                            <string_value value="Change Status To"/>
                            <composite_visibility_condition/>
                        </label>
                        <static_dropdown id="status_list" width="200px">
                            <value value="Pending Verification" caption="Pending Verification" default="true"/>
                            <value value="Notified" caption="Notified"/>
                            <value value="Closed" caption="Closed"/>
                            <value value="CIC" caption="CIC"/>
                            <composite_read_only_condition/>
                        </static_dropdown>
                    </h_section>
                    <h_section>
                        <label width="160px">
                            <string_value value="Comment"/>
                            <composite_visibility_condition/>
                        </label>
                        <text_area id="comment" width="200px">
                            <composite_read_only_condition/>
                        </text_area>
                    </h_section>
                    <h_section width="100%">
                        <button text="Cancel" style="secondary-button">
                            <set_model_property property_path="close_popup">
                                <value>
                                    <function_value function="=uuid()"/>
                                </value>
                            </set_model_property>
                            <composite_enable_condition/>
                            <composite_visibility_condition/>
                        </button>
                        <button text="Update Status" style="primary-button">
                            <action_chain>
                                <data_source_update>
                                    <source_path project="${project}" branch="${branch}" name="AllHistory"/>
                                    <fields>
                                        <field name="customers">
                                            <model_value reference="c1"/>
                                        </field>
                                        <field name="type">
                                            <string_value value="Status Update"/>
                                        </field>
                                        <field name="timeStampValue">
                                            <function_value function="=currentDateInMillis()"/>
                                        </field>
                                        <field name="comment_val">
                                            <model_value reference="comment"/>
                                        </field>
                                        <field name="user_name">
                                            <function_value function="=userId()"/>
                                        </field>
                                    </fields>
                                    <keys>
                                        <field name="id_var">
                                            <function_value function="=uuid()"/>
                                        </field>
                                    </keys>
                                </data_source_update>
                                <set_model_property property_path="close_popup">
                                    <value>
                                        <function_value function="=uuid()"/>
                                     </value>
                                </set_model_property>
                                <refresh_component component_id="Customer_Details"/>
                            </action_chain>
                            <composite_enable_condition/>
                            <composite_visibility_condition/>
                        </button>
                    </h_section>
                </v_section>
            </open_popup_window>
            <composite_enable_condition>
                <enable_condition>
                    <model_value reference="Customer_Details"/>
                    <is_not_empty/>
                </enable_condition>
            </composite_enable_condition>
            <composite_visibility_condition/>
        </button>
<!--        <button text="Assign Tasks" style="primary-button">-->
<!--            <open_popup_window popup_title="Assign Tasks" height="50%" width="50%" closePath="close_popup">-->
<!--                <v_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px" style="fixed-width">-->
<!--                            <string_value value="Selected Customer Numbers"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <v_section height="100px" width="200px">-->
<!--                            <grid id="CustTasksGrid" hide_header="true" height="100%" width="100%">-->
<!--                                <data_source project="FATCA_CIC" branch="2019_v03" source="dbd_cic_1_4_customer_details"-->
<!--                                             type="DataSource"/>-->
<!--                                <filter>-->
<!--                                    <filter_value>-->
<!--                                        <model_value reference="Customer_Details"/>-->
<!--                                    </filter_value>-->
<!--                                    <filter_mapping>-->
<!--                                        <filter_on name="customer_number"/>-->
<!--                                    </filter_mapping>-->
<!--                                </filter>-->
<!--                                <column id="c0" title="Customer Number " display="false">-->
<!--                                    <component>-->
<!--                                        <grid_label_component>-->
<!--                                            <dynamic_caption>-->
<!--                                                <field_value field="customer_number"/>-->
<!--                                            </dynamic_caption>-->
<!--                                        </grid_label_component>-->
<!--                                    </component>-->
<!--                                </column>-->
<!--                            </grid>-->
<!--                        </v_section>-->
<!--                    </h_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px">-->
<!--                            <string_value value="RM List"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <dropdown id="RMList">-->
<!--                            <data_source project="FATCA_CIC" branch="2019_v03" source="rm_list"-->
<!--                                         type="DataSource"/>-->
<!--                            <value field="rm_name"/>-->
<!--                            <sort_by name="rm_name"/>-->
<!--                            <composite_read_only_condition/>-->
<!--                        </dropdown>-->
<!--                    </h_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px">-->
<!--                            <string_value value="Task Name"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <dropdown id="TaskName">-->
<!--                            <data_source project="FATCA_CIC" branch="2019_v03" source="task_list"-->
<!--                                         type="DataSource"/>-->
<!--                            <value field="task_name"/>-->
<!--                            <sort_by name="task_name"/>-->
<!--                            <composite_read_only_condition/>-->
<!--                        </dropdown>-->
<!--                    </h_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px">-->
<!--                            <string_value value="Comment"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <text_area id="comment2" width="200px">-->
<!--                            <composite_read_only_condition/>-->
<!--                        </text_area>-->
<!--                    </h_section>-->
<!--                    <h_section width="100%">-->
<!--                        <button text="Cancel" style="secondary-button">-->
<!--                            <set_model_property property_path="close_popup">-->
<!--                                <value>-->
<!--                                    <function_value function="=uuid()"/>-->
<!--                                </value>-->
<!--                            </set_model_property>-->
<!--                            <composite_enable_condition/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </button>-->
<!--                        <button text="Update Status" style="primary-button">-->
<!--                            <action_chain>-->
<!--                                <set_model_property property_path="close_popup">-->
<!--                                    <value>-->
<!--                                        <function_value function="=uuid()"/>-->
<!--                                    </value>-->
<!--                                </set_model_property>-->
<!--                                <refresh_component component_id="Customer_Details"/>-->
<!--                            </action_chain>-->
<!--                            <composite_enable_condition/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </button>-->
<!--                    </h_section>-->
<!--                </v_section>-->
<!--            </open_popup_window>-->
<!--            <composite_enable_condition>-->
<!--                <enable_condition>-->
<!--                    <model_value reference="Customer_Details"/>-->
<!--                    <is_not_empty/>-->
<!--                </enable_condition>-->
<!--            </composite_enable_condition>-->
<!--            <composite_visibility_condition/>-->
<!--        </button>-->
<!--        <button text="Send Notifications" style="primary-button">-->
<!--            <open_popup_window popup_title="SendNotifications" height="50%" width="50%" closePath="close_popup">-->
<!--                <v_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px" style="fixed-width">-->
<!--                            <string_value value="Selected Customer Numbers"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <v_section height="100px" width="200px">-->
<!--                            <grid id="CustTasksGrid" hide_header="true" height="100%" width="100%">-->
<!--                                <data_source project="FATCA_CIC" branch="2019_v03" source="dbd_cic_1_4_customer_details"-->
<!--                                             type="DataSource"/>-->
<!--                                <filter>-->
<!--                                    <filter_value>-->
<!--                                        <model_value reference="Customer_Details"/>-->
<!--                                    </filter_value>-->
<!--                                    <filter_mapping>-->
<!--                                        <filter_on name="customer_number"/>-->
<!--                                    </filter_mapping>-->
<!--                                </filter>-->
<!--                                <column id="c0" title="Customer Number " display="false">-->
<!--                                    <component>-->
<!--                                        <grid_label_component>-->
<!--                                            <dynamic_caption>-->
<!--                                                <field_value field="customer_number"/>-->
<!--                                            </dynamic_caption>-->
<!--                                        </grid_label_component>-->
<!--                                    </component>-->
<!--                                </column>-->
<!--                            </grid>-->
<!--                        </v_section>-->
<!--                    </h_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px">-->
<!--                            <string_value value="RM List"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <dropdown id="RMList">-->
<!--                            <data_source project="FATCA_CIC" branch="2019_v03" source="rm_list"-->
<!--                                         type="DataSource"/>-->
<!--                            <value field="rm_name"/>-->
<!--                            <sort_by name="rm_name"/>-->
<!--                            <composite_read_only_condition/>-->
<!--                        </dropdown>-->
<!--                    </h_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px">-->
<!--                            <string_value value="Task Name"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <dropdown id="TaskName">-->
<!--                            <data_source project="FATCA_CIC" branch="2019_v03" source="task_list"-->
<!--                                         type="DataSource"/>-->
<!--                            <value field="task_name"/>-->
<!--                            <sort_by name="task_name"/>-->
<!--                            <composite_read_only_condition/>-->
<!--                        </dropdown>-->
<!--                    </h_section>-->
<!--                    <h_section>-->
<!--                        <label width="160px">-->
<!--                            <string_value value="Comment"/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </label>-->
<!--                        <text_area id="comment2" width="200px">-->
<!--                            <composite_read_only_condition/>-->
<!--                        </text_area>-->
<!--                    </h_section>-->
<!--                    <h_section width="100%">-->
<!--                        <button text="Cancel" style="secondary-button">-->
<!--                            <set_model_property property_path="close_popup">-->
<!--                                <value>-->
<!--                                    <function_value function="=uuid()"/>-->
<!--                                </value>-->
<!--                            </set_model_property>-->
<!--                            <composite_enable_condition/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </button>-->
<!--                        <button text="Send Notification" style="primary-button">-->
<!--                            <action_chain>-->
<!--                                <set_model_property property_path="close_popup">-->
<!--                                    <value>-->
<!--                                        <function_value function="=uuid()"/>-->
<!--                                    </value>-->
<!--                                </set_model_property>-->
<!--                                <refresh_component component_id="Customer_Details"/>-->
<!--                            </action_chain>-->
<!--                            <composite_enable_condition/>-->
<!--                            <composite_visibility_condition/>-->
<!--                        </button>-->
<!--                    </h_section>-->
<!--                </v_section>-->
<!--            </open_popup_window>-->
<!--            <composite_enable_condition>-->
<!--                <enable_condition>-->
<!--                    <model_value reference="Customer_Details"/>-->
<!--                    <is_not_empty/>-->
<!--                </enable_condition>-->
<!--            </composite_enable_condition>-->
<!--            <composite_visibility_condition/>-->
<!--        </button>-->
    </h_section>
</page>